<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* 
        i = 5
        fn = af0
        f
         */
        // var i = 5;
        // function fn(i) { // af0
        //     /* 
        //     i = 3 4 5
        //      */
        //     return function (n) { // af1  
        //         /* 
        //         n = 2
        //          */
        //         console.log(n + (++i)); // 2 + 5
        //     }
        // }
        // var f = fn(3); // af1
        // f(4); // 8
        // fn(3)(6); // 10
        // f(2); // 7
        // console.log(i); // 5


        // function fn(i) { // 
        //   /* 
        //   i = 3 4
        //    */
        //     return function (n) { //   
        //         /* 
        //         n = 6
        //          */
        //         console.log(n + (++i)); // 6 + 4
        //     }
        // }
        //----------------------------------------------------------

        /* 
        i = 2
        fn = af0
        f = 
         */
        // var i = 2; // 4 3 2 4 3
        // function fn() { // af0
        //     /* 

        //      */
        //     i += 2;
        //     return function (n) { // af1
        //        /* 

        //         */
        //         console.log(n + (--i)) // 
        //     }
        // }
        // var f = fn(); // af1
        // f(); // NaN
        // f(3); // 5
        // // f = null;
        // fn()(2); // 5



        // function fn() { // 
        //     /* 

        //      */
        //     i += 2;
        //     return function (n) { //
        //        /* 
        //        n = 2
        //         */
        //         console.log(n + (--i)) // 2 + 3
        //     }
        // }
        //---------------------------------------------------------

        /* 
        num = 1
        obj = af0
        f = af1
         */
        // var num = 1; // 2 4
        // var obj = { // af0
        //     num: 2, // 4
        //     fn: (function () {
        //         /* 
        //         num = NaN 1 3 4 6 7
        //          */
        //         this.num *= 2; // window.num*=2
        //         // 自执行函数的this是window
        //         num += 3; // num = un + 3
        //         var num = 1; // 
        //         return function () { // af1
        //                 /* 

        //                  */
        //             num += 2;
        //             this.num += 2; // obj.num +=2
        //             console.log(++num); // 7
        //         }
        //     })()
        // };
        // var f = obj.fn; // af1
        // f(); // 4
        // obj.fn(); // 7
        // console.log(window.num, obj.num); // 4  4

        //---------------------------------------------------------

        /* 
        num = 10
        obj = af0
        fn = af1
         */
        // var num = 10; // 20  30
        // // 在全局作用域下var创建的变量和window是相通的
        // var obj = { 
        //     num: 15 // 30 
        // }; // af0
        // obj.fn = (function (num) { // 给obj新增键值对 obj.fn = af1
        //     /* 
        //     num = 15 30 29 28
        //      */
        //     this.num += 10; // window.num+=10
        //     num *= 2;// 
        //     return function (n) { // af1
        //         /* 
        //         n = 15
        //          */
        //         this.num += n; // obj.num+=15
        //         // 函数里的this要看执行函数前有没有点，如果有点，那点前面是谁，函数里的this就是谁，如果没有点，那函数里的this就是window
        //         console.log(n + (--num)); // 15 + 28
        //     }
        // })(obj.num);
        // var fn = obj.fn;
        // fn(10); // 39
        // obj.fn(15); // 43
        // console.log(window.num, obj.num); // 30 30

        //===========================================
        /* 
            a = 1
            obj1 = af0
            fn1 = af1
         */
        // var a = 1; // 1 3
        // var obj1 = { // af0
        //     a: 0, // 2
        //     fn1: (function (a) {
        //             /* 
        //             a = 1 2 3 4
        //              */
        //         this.a = a; // window.a = 1
        //         a++;
        //         return function () { // af1
        //             /* 
        //             私有作用域
        //             形参赋值
        //             变量提升
        //             代码执行
        //             作用域是否销毁
        //              */
        //             this.a = a++; // window.a = 3
        //             console.log(a) // 4
        //         }
        //     })(a)
        // };
        // obj1.fn1(); // 3
        // var fn1 = obj1.fn1;
        // fn1(); // 4
        // console.log(a); // 3
        // console.log(obj1.a); // 2

        //----------------------------------------------------
        /* 
        number = 2
        obj = af0
        fn1 = af1
         */
        // var number = 2; // 4 8
        // var obj = { // af0
        //     number: 4, // 8
        //     fn1: (function () {
        //         /* 
        //         number = NaN 3 9 27
        //          */
        //         this.number *= 2; // window.number*=2
        //         number = number * 2; // number = un*2
        //         var number = 3;
        //         return function () { // af1
        //             /* 

        //              */
        //             this.number *= 2; // obj.number*=2
        //             number *= 3;
        //             alert(number); // 9 27
        //         }
        //     })()
        // };
        // var fn1 = obj.fn1;
        // alert(number); // 4
        // fn1(); // 9
        // obj.fn1(); // 27
        // alert(window.number); // 8
        // alert(obj.number); // 8

        //----------------------------------------------------
        /* 
        
            
         */
        // function g1() { // af0
        //     this.g = "gg" // obj4.g = 'gg' window.g = 'gg'
        // };
        // var obj4 = { // 
        //     g1: g1, // af0
        //     gg: function () {
        //         g1();
        //     },
        //     g:'gg'
        // };
        // obj4.g1(); //  obj4.g = 'gg'
        // obj4.gg(); // window.g = 'gg'
        // console.log(obj4); //  
        // console.log("g" in window);  // true
        // // in 检测当前对象中有没有这个属性名，如果有就返回true，没有返回fasle

        //---------------------------------------------
        /* 
            name = 'erYa'
            age = 9
         */
        // var name = 'erYa';
        // var age = 9; // 'xiaoHua' 'xiaoHua'
        // age = (function (name, age) {
        //         /* 
        //         name = 'erYa' 'xiaoHua'
        //         age = 9 9
        //          */
        //     name = 'xiaoHua';
        //     age = age || this.age;
        //     this.age = arguments[0]; // window.age = 'xiaoHua'
        //     console.log(name, age) // 'xiaoHua' 9
        //     return this.age; //window.age  ==>'xiaoHua'
        // })(name, age);
        // console.log(name, age); // 'erYa' 'xiaoHua'

        //-----------------------------------------------
        /* 
        num = 1
        obj = af0
        fn = af1
         */
        // var num = 1; // 4 14
        // var obj = { // af0
        //     num: 2 // 22
        // };
        // obj.fn = (function (num) {
        //         /* 
        //         num = 2 3 4 5
        //          */
        //     this.num = num * 2; // window.num = num*2
        //     num++;
        //     return function (n) { // af1
        //         /* 
        //         n = 20
        //          */
        //         this.num += n; // obj.num+=20
        //         num++;
        //         console.log(num) // 5
        //     }
        // })(obj.num);
        // var fn = obj.fn;
        // fn(10); // 4
        // obj.fn(20); // 5
        // console.log(num, obj.num); // 14  22

        //-----------------------------------------------------------
        /* 
        n = 20
        outer = af0
         */
        var n = 20; // 21 22 24
        function outer() { // af0
            /* 
            inner = af2
            */
            ++n;
            function inner() {
                    /* 
                    center = af3
                     */
                console.log(n++);// 21
                function center() {
                    /* 
                    
                     */
                    n += 2;
                    console.log(n); // 24
                }
                center();
            }
            inner();
        };
        outer();
        console.log(n) // 24
    </script>
</body>

</html>